<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mastering Imperative Prompts: A Command-Driven Guide</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Luckiest+Guy&family=Baloo+2:wght@700&family=Fredoka+One&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Fredoka One', 'Baloo 2', Arial Rounded MT Bold, Arial, sans-serif;
      background: linear-gradient(120deg, #16182e 70%, #0ff 180%) fixed;
      background-size: cover;
      scroll-behavior: smooth;
      color: #ecf7ff;
      min-height: 100vh;
    }
    /* Neon pulse around sections */
    main > section, .radical-enhancer, .sidebar, .quick-jumps-box {
      box-shadow: 0 0 24px 0 #0ff8, 0 0 4px 1px #faff55b3, 0 1px 16px 3px #191d2a90;
      border-radius: 2.2rem;
      margin-bottom: 2.5rem;
      border: 2.5px solid #0ff9;
      background: rgba(24,28,40,0.94);
    }
    /* Hero title styles */
    .sticky-title {
      position: sticky;
      top: 0;
      z-index: 80;
      margin-bottom: 2rem;
      padding-top: 1.5rem;
      padding-bottom: 0.7rem;
      background: linear-gradient(120deg, #0ff 30%, #faff55 120%);
      filter: blur(0);
      box-shadow: 0 0 50px 12px #0ff4, 0 2px 8px #faff5555;
      border-radius: 0 0 2.5rem 2.5rem;
      text-align: center;
    }
    .sticky-title-inner {
      display: inline-block;
      padding: 1.2em 2.2em 1em 2.2em;
      border-radius: 2.5em;
      background: rgba(24,28,40,0.92);
      box-shadow: 0 0 25px #0ffb, 0 0 8px #faff5566;
      margin: 0 auto;
      text-align: center;
      border: 3px solid #faff55b3;
    }
    .sticky-title h1 {
      font-family: 'Bangers', 'Luckiest Guy', Impact, sans-serif;
      color: #00ffe4;
      font-size: 2.6em;
      letter-spacing: 1.5px;
      margin-bottom: 0.08em;
      margin-top: 0;
      line-height: 1.1;
      text-shadow: 0 0 17px #0ff, 0 0 8px #faff5577;
    }
    .sticky-title span {
      color: #faff55;
      font-size: 0.68em;
      text-shadow: 0 0 14px #faff55, 0 0 8px #fff;
      letter-spacing: 0.5px;
      font-family: 'Luckiest Guy', 'Baloo 2', Arial, sans-serif;
    }
    .sticky-title h2 {
      font-family: 'Fredoka One', 'Baloo 2', Arial Rounded MT, Arial, sans-serif;
      color: #38f9d7;
      font-size: 1.05em;
      font-weight: 700;
      letter-spacing: 1.2px;
      margin-top: 0.25em;
      margin-bottom: 0;
      text-shadow: 0 0 10px #0ff7, 0 0 6px #222b;
    }
    /* Sidebar styles */
    .sidebar {
      position: sticky;
      top: 5.8rem;
      z-index: 30;
      background: #181c28e8;
      min-width: 215px;
      margin-top: 0;
      padding-top: 0;
      padding-bottom: 0.7em;
    }
    .quick-jumps-title {
      color: #0ff;
      font-family: 'Luckiest Guy', 'Baloo 2', Arial, sans-serif;
      font-size: 1.45rem;
      margin-bottom: 1rem;
      text-shadow: 0 0 11px #0ff7;
    }
    .sidebar a {
      display: block;
      padding: 0.72em 1.1em;
      border-radius: 1em;
      margin-bottom: 0.25em;
      color: #0ff;
      font-weight: 700;
      font-family: 'Baloo 2', sans-serif;
      font-size: 1.07em;
      background: transparent;
      transition: background 0.12s, color 0.12s;
      text-shadow: 0 0 6px #0ff9;
    }
    .sidebar a.active, .sidebar a:hover {
      background: linear-gradient(90deg,#38f9d7 75%,#faff55 130%);
      color: #181c28;
      font-weight: 900;
      box-shadow: 0 0 10px #0ff7;
      text-shadow: 0 1px 1px #faff55aa, 0 0 5px #fff;
    }
    /* Section titles */
    .section-title, h2 {
      font-family: 'Bangers', 'Luckiest Guy', Impact, sans-serif;
      color: #38f9d7;
      font-size: 2.1em;
      margin-top: 0.8em;
      margin-bottom: 0.6em;
      letter-spacing: 1px;
      text-shadow: 0 0 11px #0ff7, 0 0 4px #181c28;
    }
    /* Prompt Enhancer - Radical */
    .radical-enhancer {
      background: linear-gradient(120deg,#191d2a 85%,#0ff 105%);
      border: 4px solid #0ff;
      border-radius: 2.5rem;
      box-shadow: 0 0 32px 7px #0ff6, 0 0 8px 2px #fff6;
      padding: 2.5rem 2rem 2.3rem 2rem;
      margin-bottom: 2.5rem;
      margin-top: 2.2rem;
      position: relative;
      z-index: 2;
      max-width: 750px;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
    .radical-enhancer label {
      font-family: 'Baloo 2', sans-serif;
      color: #faff55;
      font-size: 1.28em;
      letter-spacing: 1px;
      text-shadow: 0 0 7px #fff, 0 0 14px #0ff;
      margin-bottom: 0.4em;
      display: block;
      text-align: left;
      margin-left: 0.1em;
    }
    .radical-enhancer textarea {
      font-family: 'Fredoka One', sans-serif;
      background: #232947;
      color: #0ff;
      border: 2.5px solid #38f9d7;
      border-radius: 1.3rem;
      width: 100%;
      font-size: 1.13em;
      min-height: 60px;
      padding: 0.9em 1em;
      box-shadow: 0 0 12px #0ff6;
      outline: none;
      margin-bottom: 1em;
      resize: vertical;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .radical-enhancer textarea:focus {
      border-color: #faff55;
      box-shadow: 0 0 18px #faff55cc, 0 0 5px #0ff;
      background: #1a1d25;
      color: #faff55;
    }
    .radical-enhancer button {
      font-family: 'Luckiest Guy', 'Baloo 2', Impact, sans-serif;
      background: linear-gradient(90deg,#38f9d7,#faff55 96%);
      color: #191d2a;
      border: none;
      font-size: 1.2em;
      padding: 0.7em 2.1em;
      border-radius: 2em;
      box-shadow: 0 0 18px #faff55cc, 0 0 8px #0ff;
      cursor: pointer;
      margin-bottom: 1em;
      margin-top: 0.5em;
      transition: background 0.2s, color 0.15s;
      text-shadow: 0 2px 4px #fff9, 0 0 8px #faff55aa;
    }
    .radical-enhancer button:hover {
      background: linear-gradient(90deg,#faff55,#38f9d7 80%);
      color: #0ff;
      box-shadow: 0 0 20px #0ff, 0 0 10px #faff55cc;
    }
    .radical-enhancer .gemini-tool-result {
      background: #1a1d25;
      border-radius: 1rem;
      color: #38f9d7;
      font-size: 1.1em;
      margin-top: 1.2em;
      min-height: 2.4em;
      padding: 0.8em 1em;
      border: 1.5px solid #38f9d7;
      box-shadow: 0 0 6px #0ff6;
      word-break: break-word;
    }
    /* Main content + containers */
    .main-table th, .gloss-table th {
      background:#38f9d7;
      color:#191d2a;
      font-weight:900;
      padding: 0.75rem 0.5rem;
      text-shadow: 0 0 4px #faff55cc;
      font-family: 'Baloo 2', sans-serif;
      font-size: 1.07em;
    }
    .main-table td, .gloss-table td {
      background: #191d2a;
      color: #faff55;
      padding:0.7rem 0.55rem;
      font-family: 'Fredoka One', sans-serif;
    }
    .main-table tr:nth-child(even) td, .gloss-table tr:nth-child(even) td {
      background: #1a2637;
    }
    .pill.green { background:#0ff; color:#191d2a; }
    .pill.yellow { background:#faff55; color:#232947; }
    .pill.orange { background:#ff9900; color:#191d2a; }
    .pill.red { background:#ff2255; color:#fff; }
    .why-card {
      background: #232947;
      border-left: 7px solid #0ff;
      border-radius: 1.3rem;
      padding: 1.1em 1.3em 0.9em 1.3em;
      margin-bottom: 1.12rem;
      color: #faff55;
      box-shadow: 0 0 13px #0ff6;
      font-family: 'Baloo 2', sans-serif;
      font-size: 1.09em;
    }
    /* Glossy effect for formula box */
    .formula-box {
      background: linear-gradient(90deg, #38f9d7 55%, #faff55 200%);
      border-radius: 1.4rem;
      border-left: 6px solid #0ff;
      color: #181c28;
      font-family: 'Luckiest Guy', sans-serif;
      box-shadow: 0 0 14px #0ff7, 0 0 8px #faff5555;
      font-size: 2em;
    }
    .troubleshoot-block {
      background: #1a1d25;
      border-left: 6px solid #faff55;
      border-radius: 1rem;
      color: #38f9d7;
      font-family: 'Fredoka One', sans-serif;
      font-size: 1.06em;
      padding: 1.1rem 1.5rem 1.1rem 1.2rem;
      margin-bottom: 2rem;
    }
    ul, .list-disc {
      color: #38f9d7;
      font-family: 'Fredoka One', sans-serif;
      font-size: 1.04em;
    }
    .bg-gradient-to-br {
      background: linear-gradient(120deg,#181c28 85%,#0ff 120%) !important;
    }
    .shadow-xl { box-shadow: 0 0 21px #0ff8, 0 1px 5px #fff8 !important;}
    .text-white { color: #faff55 !important; }
    .text-sky-800 { color: #38f9d7 !important; }
    /* Sparkle cursor (optional: uncomment for more radicalness) */
    /*
    body, html {
      cursor: url('https://cdn.glitch.global/d543c93b-d292-4995-a892-0f3b8b08abbd/neon-cursor.cur'), auto;
    }
    */
    /* Scrollbar styling */
    ::-webkit-scrollbar { background: #10192a; width: 10px;}
    ::-webkit-scrollbar-thumb { background: #0ff7; border-radius: 9px;}
    ::selection { background: #faff55aa; color: #191d2a; }
  </style>
</head>
<body>
  <!-- Sticky electrified title card -->
  <div class="sticky-title" id="mainTitleCard">
    <div class="sticky-title-inner">
      <h1>Mastering Imperative Prompts:<br> <span>A Command-Driven Guide</span></h1>
      <h2>Learn how to control LLMs, boost compliance, and generate radical results.<br>Only real, research-backed techniques.</h2>
    </div>
  </div>
  
  <!-- Main Layout -->
  <div class="container mx-auto px-2 py-6 flex flex-col lg:flex-row gap-8">
    <aside class="lg:w-1/4">
      <div class="sidebar quick-jumps-box">
        <div class="quick-jumps-title">Quick Jumps</div>
        <nav id="sidebarNav"></nav>
      </div>
    </aside>
    <main class="lg:w-3/4">
      <!-- RADICAL PROMPT ENHANCER (visible and bold) -->
      <section class="radical-enhancer" id="prompt-enhancer-box">
        <label for="promptEnhancerInput">💡 Make your prompt RADICAL:</label>
        <textarea id="promptEnhancerInput" placeholder="Paste a weak prompt here..."></textarea>
        <button id="enhancePromptButton">Enhance!</button>
        <div id="promptEnhancerOutput" class="gemini-tool-result">Enter a prompt and tap Enhance!</div>
      </section>

      <section id="why-tactics-work" class="mb-12">
        <h2 class="section-title">Why These Tactics Work</h2>
        <div id="whyCards" class="grid sm:grid-cols-2 gap-4"></div> 
      </section>
      <section id="prompt-formula" class="mb-12">
        <h2 class="section-title">Golden Prompt Formula</h2>
        <div class="formula-box p-6 mb-5 text-sky-900 text-center">
          <span>COMMAND + THING + FORMAT</span>
        </div>
        <p class="text-lg mb-3" style="color:#faff55;"><strong>Example:</strong> <em style="color:#38f9d7;">Generate 5 startup ideas <b>in a table</b> with <b>name</b>, <b>audience</b>, <b>risk</b></em></p>
      </section>
      <!-- You can add the Prompt Troubleshooter here too with radical-enhancer class if desired. -->
      <section id="interactive-tools" class="card bg-gradient-to-br border-0 p-0 overflow-hidden relative shadow-xl rounded-[2.5rem] mb-14">
        <div class="flex flex-col md:flex-row items-stretch gap-6 px-3 py-4 md:px-8 md:py-7">
          <!-- Tool 2 (Optional: Make it radical too) -->
          <div class="radical-enhancer flex-1">
            <label for="promptTroubleshootInput" style="color:#ff9900;">🧠 Prompt Troubleshooter:</label>
            <textarea id="promptTroubleshootInput" placeholder="Paste your problematic prompt..."></textarea>
            <textarea id="promptProblemDescription" placeholder="Optional: What’s wrong? (e.g., vague, rambling)" style="background:#291d1a; color:#ff9900; margin-top:0.3em;"></textarea>
            <button id="troubleshootPromptButton" style="background:linear-gradient(90deg,#ff9900 60%,#0ff 150%);color:#191d2a;">Diagnose</button>
            <div id="promptTroubleshootOutput" class="gemini-tool-result" style="color:#ff9900;border-color:#ff9900;">Enter a prompt and tap Diagnose.</div>
          </div>
        </div>
      </section>
      <section id="strengthening" class="mb-12">
        <h2 class="section-title">Prompt-Strengthening Techniques</h2>
        <ul class="list-disc list-inside space-y-2 ml-2 text-lg">
          <li>Upgrade Soft Verbs: <span style="color:#faff55;">"Reflect on..." → "List 3 reflections and rank them."</span></li>
          <li>Use Roles: <span style="color:#faff55;">"You are a cautious thinker. Rank 3 risks."</span></li>
          <li>Role Prompt Hack: <span style="color:#faff55;">"You are a prompt engineer. Evaluate compliance."</span></li>
          <li>Instruction Spotlighting: <span style="color:#faff55;">Use brackets: "Please [Generate] a summary."</span></li>
          <li>Stepwise Refinement: <span style="color:#faff55;">Start with hard command, then refine (generate → bullet → analyze).</span></li>
          <li>Audience Framing: <span style="color:#faff55;">Vary tone: explain to a 10-year-old vs. PhD.</span></li>
          <li>Chained Workflow: <span style="color:#faff55;">Idea → Evaluate → Improve.</span></li>
        </ul>
      </section>
      <section id="tier-table" class="mb-12">
        <h2 class="section-title">Verb Tier Table</h2>
        <div class="table-container">
          <table class="main-table" id="tierTable"></table>
        </div>
      </section>
      <section id="adverb-grid" class="mb-12">
        <h2 class="section-title">Adverb Control Grid</h2>
        <div class="table-container">
          <table class="main-table" id="adverbGrid"></table>
        </div>
      </section>
      <section id="troubleshooting" class="mb-12">
        <h2 class="section-title">Troubleshooting & Diagnostics</h2>
        <div class="troubleshoot-block" id="troubleshootingBlock"></div>
      </section>
      <section id="prompt-fix" class="mb-12">
        <h2 class="section-title">Prompt Fix Library</h2>
        <div class="table-container">
          <table class="main-table" id="promptFix"></table>
        </div>
      </section>
      <section id="glossary" class="mb-12">
        <h2 class="section-title">Glossary</h2>
        <div class="table-container">
          <table class="gloss-table main-table" id="glossaryTable"></table> </div>
      </section>
      <section id="summary" class="card bg-gradient-to-br text-white shadow-xl rounded-3xl">
        <h2 class="section-title !text-white !mt-0">Summary Rules</h2>
        <ul id="summary-list" class="list-disc list-inside space-y-3 pl-4 text-lg"></ul>
        <p class="mt-8 text-xl font-semibold text-center text-sky-50 hero-title" style="color:#faff55;">Command = Control.</p>
        <p class="mt-2 text-md text-center text-sky-100 italic" style="color:#38f9d7;">Stop asking nicely. Start telling the AI what to do.</p>
      </section>
    </main>
  </div>
  <footer style="background:#10192a;color:#38f9d7;text-align:center;padding:2.5em 0 2em 0;margin-top:3em;box-shadow:0 0 18px #0ff5;">
    <p>&copy; <span id="currentYear"></span> Mastering Imperative Prompts.</p>
  </footer>
<script>
/* DATA -- use your previous, PDF-aligned, research-backed data objects */

const navLinks = [
  { href: "#why-tactics-work", text: "Why These Tactics Work" },
  { href: "#prompt-formula", text: "Golden Prompt Formula" },
  { href: "#prompt-enhancer-box", text: "Prompt Enhancer" },
  { href: "#interactive-tools", text: "Prompt Troubleshooter" },
  { href: "#strengthening", text: "Prompt-Strengthening Techniques" },
  { href: "#tier-table", text: "Verb Tier Table" },
  { href: "#adverb-grid", text: "Adverb Control Grid" },
  { href: "#troubleshooting", text: "Troubleshooting & Diagnostics" },
  { href: "#prompt-fix", text: "Prompt Fix Library" },
  { href: "#glossary", text: "Glossary" },
  { href: "#summary", text: "Summary Rules" }
];

const whyCardsData = [ 
  {
    title: "AI's Favorite Verbs",
    body: "AIs are trained on tons of examples where words like 'List', 'Write', or 'Generate' mean 'do this specific thing.' They learn this pattern really well and know it means “get to work.”"
  },
  {
    title: "Command First = AI Listens Better",
    body: "AIs pay most attention to words at the start of your prompt. Put your main command ('List the reasons...') upfront so the AI gets the point immediately and doesn't get sidetracked."
  },
  {
    title: "Clear Verbs = Clear Results",
    body: "'List' tells the AI to make a list—super clear. 'Explore' is fuzzy; the AI doesn't know what an 'exploration' output should look like, so it might just ramble. Specific verbs get predictable results."
  },
  {
    title: "AI Training Echo Chamber",
    body: "A lot of AI training data is made by *other* AIs. This means command words and sentence styles get repeated and reinforced, making them extra reliable."
  }
];

const tierTableData = { 
  headers: ["Tier", "Binding Strength", "Typical Verbs", "Behavior", "Example", "Why it Works", "Fix Guidance"],
  rows: [
    ["S-Tier", '<span class="pill green">High</span>', "Generate, Create, Write, List, Summarize, Define, Tabulate", "Direct response, predictable structure", "List 3 startup ideas in a table", "Common in training data, matches output expectations", "Use when output must be guaranteed"],
    ["B-Tier", '<span class="pill yellow">Medium</span>', "Refine, Edit, Adjust, Evaluate, Compare, Explain, Analyze, Classify", "Works when you define what to edit & output format", "Refine summary into bullet points", "Implies a task, but AI needs more context", "Add noun and format to clarify"],
    ["D-Tier", '<span class="pill orange">Low</span>', "Explore, Consider, Reflect, Brainstorm, Workshop, Discuss, Suggest", "AI may ramble, output is variable", "Brainstorm startup ideas", "Soft, unclear—AI guesses or rambles", "Rewrite with S-Tier verb, e.g., 'List 5 ideas for X'"],
    ["F-Tier", '<span class="pill red">Avoid</span>', "Imagine, Wonder, Muse, Speculate, Dream, Feel", "Unpredictable, creative fluff or nonsense", "Imagine the future of AI", "No clear pattern in training data", "Only for fun or creative use"]
  ]
};

const adverbGridData = { 
  headers: ["Verb", "+ Briefly", "+ Logically", "+ Clearly", "+ Formally"],
  rows: [
    ["Explain", "In 2-3 lines", "Step-by-step reasoning", "No jargon", "Polished tone"],
    ["Summarize", "≤ 100 words", "Bullet outline", "Plain English", "Executive format"],
    ["Describe", "1 paragraph", "Ordered by features", "Focus on visuals", "Neutral, objective"]
  ]
};

const troubleshootingBlockContent = `  
  <b>Rambling output:</b> Used soft/introspective verb (like "think", "explore").<br>
  <b>Fix:</b> Replace with S-Tier verb + noun + format.<br>
  <br>
  <b>Model ignores "don't include X":</b> Negative constraint poorly processed.<br>
  <b>Fix:</b> State positive directive, e.g., "Include only X".<br>
  <br>
  <b>Unstructured response:</b> Missing format specifier.<br>
  <b>Fix:</b> Add: "as 3 bullet points", "in table format", etc.<br>
  <br>
  <b>Verbose/dry:</b> Default temperature used.<br>
  <b>Fix:</b> Use 0.2 for logic, 0.8 for creativity.
`; 

const promptFixData = { 
  headers: ["Before", "After"],
  rows: [
    ["Let's explore UI designs.", "Design a minimalist UI; provide 3 layout bullets."],
    ["Can you think about revenue ideas?", "List 5 revenue ideas and rank by ROI."],
    ["Please workshop a prompt with me.", "Ask 3 questions to refine my image prompt."],
    ["Consider adding suspense.", "Rewrite scene; insert suspense beat after paragraph 2."],
    ["Reflect on training data bias.", "Summarize 3 key training data biases in 1 sentence each."]
  ]
};

const glossaryTableData = { 
  headers: ["Term", "Definition"],
  rows: [
    ["Temperature", "Controls randomness. 0 = deterministic, 1 = creative randomness."],
    ["Few-shot Prompting", "Providing examples to guide output format."],
    ["Chain-of-Thought", "Step-by-step reasoning scaffold."],
    ["Prompt Rigidity", "How strictly the model follows format."],
    ["Hard Prompt", "Formula: Verb + Noun + Format + Constraint."]
  ]
};

const summaryListData = [ 
  "Use Tier-1 verbs: <b>Generate, Write, List</b>.",
  "Follow the formula: <b>Verb + Noun + Format + Constraint</b>.",
  "Soft verbs lead to vague results—wrap them in hard scaffolds.",
  "Fix prompt failures with clear format and structure instructions.",
  "Each model behaves differently: GPT-4 prefers structure, Claude adds caution, Gemini returns facts."
];

/* --- RENDER FUNCTIONS --- (unchanged from previous working version) */
function renderSidebar() {
  const navElement = document.getElementById('sidebarNav'); 
  if (!navElement) { console.error("Sidebar nav element not found"); return; }
  navElement.innerHTML = navLinks.map(link =>
    `<a href="${link.href}" class="">${link.text}</a>`
  ).join('');
  
  document.querySelectorAll('#sidebarNav a').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const targetId = this.getAttribute('href');
      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });
}

function setupScrollSpy() {
    const sections = document.querySelectorAll('main section[id]');
    const sidebarLinks = document.querySelectorAll('#sidebarNav a');
    if (sidebarLinks.length === 0 || sections.length === 0) return;

    const observerOptions = {
        root: null, 
        rootMargin: '0px',
        threshold: 0.4 
    };

    const observerCallback = (entries, observer) => {
        entries.forEach(entry => {
            const href = `#${entry.target.id}`;
            const correspondingLink = document.querySelector(`#sidebarNav a[href="${href}"]`);
            if (entry.isIntersecting) {
                sidebarLinks.forEach(link => link.classList.remove('active'));
                if (correspondingLink) {
                    correspondingLink.classList.add('active');
                }
            } else {
                 if (correspondingLink) {
                    correspondingLink.classList.remove('active');
                }
            }
        });
    };

    const observer = new IntersectionObserver(observerCallback, observerOptions);
    sections.forEach(section => observer.observe(section));
    
    window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            if (pageYOffset >= sectionTop - 60) { 
                current = section.getAttribute('id');
            }
        });

        sidebarLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === `#${current}`) {
                link.classList.add('active');
            }
        });
        if (window.pageYOffset < sections[0].offsetTop - 60 && sidebarLinks.length > 0) {
            sidebarLinks.forEach(link => link.classList.remove('active'));
        }
    }, {passive: true}); 
     window.dispatchEvent(new Event('scroll')); 
}

function renderWhyCards() {
  const whyCardsContainer = document.getElementById('whyCards'); 
  if (!whyCardsContainer) { console.error("Why cards container not found"); return; }
  whyCardsContainer.innerHTML = whyCardsData.map(card => 
    `<div class="why-card"><span class="font-bold text-sky-700">${card.title}:</span> ${card.body}</div>` 
  ).join('');
}

function renderTable(tableId, data) { 
  const tableElement = document.getElementById(tableId); 
  if (!tableElement) { console.error(`Table element with ID ${tableId} not found`); return; }
  let html = "<thead><tr>";
  data.headers.forEach(h => html += `<th>${h}</th>`);
  html += "</tr></thead><tbody>";
  data.rows.forEach(row => {
    html += "<tr>";
    row.forEach(cell => html += `<td>${cell}</td>`);
    html += "</tr>";
  });
  html += "</tbody>";
  tableElement.innerHTML = html;
}

function renderList(listId, data) { 
  const listElement = document.getElementById(listId); 
  if (!listElement) { console.error(`List element with ID ${listId} not found`); return; }
  listElement.innerHTML = data.map(item => `<li>${item}</li>`).join('');
}

/* --- GEMINI API DUMMY INTEGRATION --- */
function callGeminiAPI(promptText, buttonElement, loaderElement, outputElement) {
  // Fake for demo purposes!
  setTimeout(() => {
    outputElement.textContent = "🚀 RADICALIZED: " + promptText.replace(/weak|soft|vague|explore|think|maybe|could you/gim, "COMMAND").replace(/^\s*$/,"Please enter a prompt.");
    if(buttonElement) buttonElement.disabled = false;
    if(loaderElement) loaderElement.classList.add('hidden');
  }, 800);
}

function setupGeminiTools() {
  // --- Prompt Enhancer ---
  const enhanceBtn = document.getElementById('enhancePromptButton');
  const enhanceInput = document.getElementById('promptEnhancerInput');
  const enhanceOutput = document.getElementById('promptEnhancerOutput');
  if (enhanceBtn && enhanceInput && enhanceOutput) {
    enhanceBtn.addEventListener('click', () => {
      enhanceBtn.disabled = true;
      enhanceOutput.textContent = "Thinking...";
      callGeminiAPI(enhanceInput.value, enhanceBtn, null, enhanceOutput);
    });
  }
  // --- Prompt Troubleshooter ---
  const troubleshootBtn = document.getElementById('troubleshootPromptButton');
  const troubleshootInput = document.getElementById('promptTroubleshootInput');
  const troubleshootProblem = document.getElementById('promptProblemDescription');
  const troubleshootOutput = document.getElementById('promptTroubleshootOutput');
  if (troubleshootBtn && troubleshootInput && troubleshootProblem && troubleshootOutput) {
    troubleshootBtn.addEventListener('click', () => {
      troubleshootBtn.disabled = true;
      troubleshootOutput.textContent = "Thinking...";
      callGeminiAPI("Diagnosing: " + troubleshootInput.value + " (" + troubleshootProblem.value + ")", troubleshootBtn, null, troubleshootOutput);
    });
  }
}

/* --- INIT --- */
document.addEventListener('DOMContentLoaded', () => { 
    document.getElementById('currentYear').textContent = new Date().getFullYear();
    renderSidebar();
    renderWhyCards();
    renderTable('tierTable', tierTableData); 
    renderTable('adverbGrid', adverbGridData); 
    const troubleshootingBlockEl = document.getElementById('troubleshootingBlock');
    if (troubleshootingBlockEl) {
      troubleshootingBlockEl.innerHTML = troubleshootingBlockContent; 
    } else {
      console.error("Troubleshooting block element not found");
    }
    renderTable('promptFix', promptFixData); 
    renderTable('glossaryTable', glossaryTableData); 
    renderList('summary-list', summaryListData); 
    setupScrollSpy(); 
    setupGeminiTools(); // Initialize Gemini API tools
});
</script>
</body>
</html>
